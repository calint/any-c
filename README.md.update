#/bin/sh -x

f=README.md
a=__about__.md
s=qa/18.ci
b=./any-c
c=c.c
o=con.out

cat $a               >  $f  &&
echo                 >> $f  &&
echo                 >> $f  &&
echo "sample source" >> $f  &&
echo '```'           >> $f  &&
cat $s               >> $f  &&
echo '```'           >> $f  &&
./make.sh                   &&
$b $s                >  $c  &&
echo                 >> $f  &&
echo                 >> $f  &&
echo "compiles to"   >> $f  &&
echo '```'           >> $f  &&
cat $c               >> $f  &&
echo '```'           >> $f  &&
gcc -O0 -g $c               &&
./a.out              >  $o  &&
echo                 >> $f  &&
echo                 >> $f  &&
echo "outputs"       >> $f  &&
echo '```'           >> $f  &&
cat $o               >> $f  &&
echo '```'           >> $f  &&
echo                 >> $f  &&
echo '```'           >> $f  &&
echo                 >> $f  &&
echo "source size"              >> $f  &&
echo 'cat src/ci/* | wc'        >> $f &&
cat src/ci/* | wc               >> $f &&
echo 'cat src/ci/* | gzip | wc' >> $f &&
cat src/ci/* | gzip | wc        >> $f &&
echo '```'                      >> $f  &&
echo                            >> $f &&
ls -la --color $f
